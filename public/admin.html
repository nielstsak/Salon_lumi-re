<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <title>Espace Administrateur</title>
  <link rel="stylesheet" href="styles.css"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div class="admin-container">
  <h1>Espace Administrateur</h1>
  <p class="logout-link"><a href="/logout">Se déconnecter</a></p>

  <div class="admin-tabs">
    <button class="admin-tab-btn" data-tab="cal-tab">Calendrier</button>
    <button class="admin-tab-btn" data-tab="services-tab">Services</button>
    <button class="admin-tab-btn" data-tab="hours-tab">Horaires</button>
    <button class="admin-tab-btn" data-tab="blocks-tab">Blocages</button>
  </div>

  <!-- Contenu Onglet Calendrier -->
  <div class="admin-tab-content" id="cal-tab" style="display:none;">
    <h2>Calendrier des Rendez-vous</h2>
    <div class="admin-cal-wrapper">
      <button class="admin-cal-btn" id="cal-admin-prev" aria-label="Mois précédent">←</button>
      <h4 id="admin-cal-title"></h4>
      <button class="admin-cal-btn" id="cal-admin-next" aria-label="Mois suivant">→</button>
    </div>
    <div id="admin-month-calendar" class="calendar-grid"></div>
    <div class="day-details">
      <h3>Liste des RDV du <span id="admin-chosen-day"></span></h3>
    </div>
    <div class="table-container">
        <table id="admin-day-appointments-table">
          <thead>
            <tr><th>ID</th><th>Client</th><th>Début</th><th>Fin</th><th>Téléphone</th><th>Action</th></tr>
          </thead>
          <tbody><!-- Rempli par JS --></tbody>
        </table>
    </div>
  </div>

  <!-- Contenu Onglet Services -->
  <div class="admin-tab-content" id="services-tab" style="display:none;">
    <h2>Gérer les Prestations</h2>
    <div class="admin-form-section">
      <form id="service-form">
        <input type="hidden" id="service-id" name="id">
        <h3 id="service-form-title">Ajouter une prestation</h3>
        <div class="form-grid">
            <label for="service-title">Titre :</label>
            <input type="text" id="service-title" name="title" required>
            <label for="service-duration">Durée (min) :</label>
            <input type="number" id="service-duration" name="duration" value="30" required>
            <label for="service-price">Prix (€) :</label>
            <input type="number" id="service-price" name="price" step="0.01" required>
        </div>
        <div class="form-actions">
            <button type="submit" class="modal-btn confirm">Enregistrer</button>
            <button type="button" id="service-form-cancel" class="modal-btn cancel">Annuler</button>
        </div>
      </form>
    </div>
    <h3>Liste des prestations</h3>
    <div class="table-container">
        <table id="services-table">
          <thead>
            <tr><th>Titre</th><th>Durée</th><th>Prix</th><th>Actions</th></tr>
          </thead>
          <tbody><!-- Rempli par JS --></tbody>
        </table>
    </div>
  </div>

  <!-- Contenu Onglet Horaires -->
  <div class="admin-tab-content" id="hours-tab" style="display:none;">
    <h2>Horaires d'ouverture</h2>
    <p>Définissez pour chaque jour les horaires (HH:MM). Laissez les deux champs vides pour fermer le jour.</p>
    <div class="table-container">
        <table id="hours-table">
          <thead>
            <tr><th>Jour</th><th>Début</th><th>Fin</th><th>Action</th></tr>
          </thead>
          <tbody><!-- Rempli par JS --></tbody>
        </table>
    </div>
  </div>

  <!-- Contenu Onglet Blocages -->
  <div class="admin-tab-content" id="blocks-tab" style="display:none;">
    <h2>Blocages & Vacances</h2>
    <form id="block-form" class="admin-form-section">
      <h3>Ajouter un blocage ponctuel</h3>
      <label>Début : <input type="datetime-local" name="start" required/></label>
      <label>Fin : <input type="datetime-local" name="end" required/></label>
      <label>Raison (optionnel) : <input type="text" name="reason"/></label>
      <button type="submit" class="modal-btn confirm">Ajouter blocage</button>
    </form>
    <form id="vacation-form" class="admin-form-section">
      <h3>Ajouter une période de vacances</h3>
      <label>Début : <input type="datetime-local" name="start" required/></label>
      <label>Fin : <input type="datetime-local" name="end" required/></label>
      <label>Raison (optionnel) : <input type="text" name="reason" value="Vacances"/></label>
      <button type="submit" class="modal-btn confirm">Ajouter vacances</button>
    </form>
    <h3 style="margin-top:20px;">Liste des blocages/vacances</h3>
    <div class="table-container">
        <table id="blocks-table">
          <thead>
            <tr><th>ID</th><th>Début</th><th>Fin</th><th>Type</th><th>Raison</th><th>Action</th></tr>
          </thead>
          <tbody><!-- Rempli par JS --></tbody>
        </table>
    </div>
  </div>
</div>

<!-- Modale de Confirmation/Information Générique -->
<div id="modal-container" class="modal-container" style="display:none;" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <h3 id="modal-title"></h3>
      <div id="modal-body"></div>
      <div id="modal-actions" class="form-actions"></div>
    </div>
</div>

<script src="admin.js"></script>
</body>
</html>
